
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Metadata Â· Signal K Documentation</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="permissions.html" />
    
    
    <link rel="prev" href="data_model_multiple_values.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Signal K Specification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Getting Started
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="start_using.html">
            
                <a href="start_using.html">
            
                    
                    Using SK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="start_developing.html">
            
                <a href="start_developing.html">
            
                    
                    Developing with SK
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Data Model
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="data_model.html">
            
                <a href="data_model.html">
            
                    
                    Full and Delta Models
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="data_model_multiple_values.html">
            
                <a href="data_model_multiple_values.html">
            
                    
                    Multiple Values
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.3" data-path="data_model_metadata.html">
            
                <a href="data_model_metadata.html">
            
                    
                    Metadata
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="permissions.html">
            
                <a href="permissions.html">
            
                    
                    Permissions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="urls_etc.html">
            
                <a href="urls_etc.html">
            
                    
                    Ports, Urls and Versioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="rest_api.html">
            
                <a href="rest_api.html">
            
                    
                    REST API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="streaming_api.html">
            
                <a href="streaming_api.html">
            
                    
                    Streaming WebSocket API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="connection.html">
            
                <a href="connection.html">
            
                    
                    Discovery & Connection Establishment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="subscription_protocol.html">
            
                <a href="subscription_protocol.html">
            
                    
                    Subscription Protocol
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="design_notes.html">
            
                <a href="design_notes.html">
            
                    
                    Background and Design Rationale
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="how_to_help.html">
            
                <a href="how_to_help.html">
            
                    
                    How Can I Help?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="keys/">
            
                <a href="keys/">
            
                    
                    Appendix: Keys Reference
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Metadata</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="metadata">Metadata</h1><h3 id="the-use-cases">The Use Cases</h3><p>Let&apos;s assume we have engine1.rpm as a key/value in Signal K. We want to display it on our dashboard, and monitor alarms for temp, oil, rpm etc.</p><p>We can drop a generic dial gauge on our dash and display rpm, but it can&apos;t know maxRpm, or alarms unless its an engine-specific gauge, and knows where to look in the Signal K schema. So we will end up with a profusion of role specific gauges to maintain. We also have non standard key names for max, min, high, low, etc. which pollute the schema.</p><p>Currently the Signal K server has a set of specific alarm keys. These grow over time and are becoming awkward. The server can only monitor these specific keys at present as there is no mechanism for arbitrary alarm definition.</p><h3 id="metadata-for-a-data-value">Metadata for a Data Value</h3><p>Each data key should have an optional <code>.meta</code> object. This holds data in a standard way which enables the max/min/alarm and display to be automatically derived.</p><pre><code class="lang-json">{
  <span class="hljs-string">&quot;displayName&quot;</span>: <span class="hljs-string">&quot;Tachometer, Engine 1&quot;</span>,
  <span class="hljs-string">&quot;shortName&quot;</span>: <span class="hljs-string">&quot;RPM&quot;</span>,
  <span class="hljs-string">&quot;warnMethod&quot;</span>: <span class="hljs-string">&quot;visual&quot;</span>,
  <span class="hljs-string">&quot;warnMessage&quot;</span>: <span class="hljs-string">&quot;any text&quot;</span>,
  <span class="hljs-string">&quot;alarmMethod&quot;</span>: <span class="hljs-string">&quot;sound&quot;</span>,
  <span class="hljs-string">&quot;alarmMessage&quot;</span>: <span class="hljs-string">&quot;any text&quot;</span>,
  <span class="hljs-string">&quot;zones&quot;</span>: [
    {<span class="hljs-string">&quot;lower&quot;</span>:<span class="hljs-number">0.0</span>,<span class="hljs-string">&quot;upper&quot;</span>:<span class="hljs-number">500</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;alarm&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>:<span class="hljs-string">&quot;Stopped or very slow Rpm&quot;</span>},
    {<span class="hljs-string">&quot;lower&quot;</span>:<span class="hljs-number">500</span>,<span class="hljs-string">&quot;upper&quot;</span>:<span class="hljs-number">3000</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;normal&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>:<span class="hljs-string">&quot;&quot;</span>},
    {<span class="hljs-string">&quot;lower&quot;</span>:<span class="hljs-number">3000</span>,<span class="hljs-string">&quot;upper&quot;</span>:<span class="hljs-number">3500</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;warn&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>:<span class="hljs-string">&quot;Approaching maximum rpm&quot;</span>},
    {<span class="hljs-string">&quot;lower&quot;</span>:<span class="hljs-number">3500</span>,<span class="hljs-string">&quot;upper&quot;</span>:<span class="hljs-number">9999</span>,<span class="hljs-string">&quot;state&quot;</span>:<span class="hljs-string">&quot;alarm&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>:<span class="hljs-string">&quot;Exceeding maximum rpm&quot;</span>}
  ]
}</code></pre>
<p>Since the settings object is always the same, the tachometer can now limit its range, and display green, yellow, and red sectors. The generic gauge can now perform this role, with correct labels etc.</p><p>The alarms problem is also improved, as the server can run a background process to monitor any key that has a <code>.meta</code> object, and raise a generic alarm event. By recursing the tree the alarm monitoring can find the source (engine1), giving the alarm context. See [[Alarm Handling]]</p><p>The alarms functionality then becomes generic, and grows with the spec. This is may be the case for other functionality also.</p><h3 id="default-configuration">Default Configuration</h3><p>Other than a few standard keys it is unlikely that the <code>.meta</code> can have global defaults, as it is very vessel specific (e.g. a sail boat will have speeds from 0-15kts, a ski boat will have 0-50kts). So the values will have to be configured by the user on the individual vessel as required.</p><p>It is probably possible to have profiles that set a range of default <code>.meta</code>, e.g. sail vessel, or motor vessel, and if two vessels have the same engine, then the engine profiles will also tend to be the same.</p><h3 id="alarm-management">Alarm Management</h3><p>An alarm watch is set by setting the <code>meta.zones</code> array appropriately. A background process on the server checks for alarm conditions on any attribute with a <code>meta.zones</code> array. If the keys value is within a zone the server sets an alarm key similar to <code>vessels.self.notifications.[original_key_suffix]</code>, eg an alarm set on <code>vessels.self.navigation.courseOverGroundTrue</code> will become <code>vessels.self.notifications.navigation.courseOverGroundTrue</code>.</p><p>The object found at this key should contain the following:</p><pre><code class="lang-json">{
  <span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;any text&quot;</span>,
  <span class="hljs-string">&quot;state&quot;</span>: <span class="hljs-string">&quot;[normal|alert|warn|alarm|emergency]&quot;</span>
}</code></pre>
<h3 id="other-benefits">Other Benefits</h3><p>The common profiles should be exportable and importable. This would allow manufacturers or other users to create profiles for specific products or use cases, which could then be imported to a vessel.</p><p>This may also have possibilities for race control or charter management. For instance a limit on lat/lon would raise an &apos;Out of Bounds&apos; email on a charter vessel.</p><p>A lot of the current max/min/alarm values could be removed to simplify and standardise the spec.</p>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="data_model_multiple_values.html" class="navigation navigation-prev " aria-label="Previous page: Multiple Values">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="permissions.html" class="navigation navigation-next " aria-label="Next page: Permissions">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Metadata","level":"1.3.3","depth":2,"next":{"title":"Permissions","level":"1.3.4","depth":2,"path":"permissions.md","ref":"permissions.md","articles":[]},"previous":{"title":"Multiple Values","level":"1.3.2","depth":2,"path":"data_model_multiple_values.md","ref":"data_model_multiple_values.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Signal K Documentation","gitbook":"*"},"file":{"path":"data_model_metadata.md","mtime":"2016-09-15T19:41:03.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-09-15T20:12:22.516Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

