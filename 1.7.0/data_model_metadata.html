<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Metadata</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Signal K Specification</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Getting Started</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="start_using.html"><strong aria-hidden="true">2.1.</strong> Using SK</a></li><li class="chapter-item expanded "><a href="start_developing.html"><strong aria-hidden="true">2.2.</strong> Developing with SK</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Data Model</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="data_model.html"><strong aria-hidden="true">3.1.</strong> Full and Delta Models</a></li><li class="chapter-item expanded "><a href="data_model_multiple_values.html"><strong aria-hidden="true">3.2.</strong> Multiple Values</a></li><li class="chapter-item expanded "><a href="data_model_metadata.html" class="active"><strong aria-hidden="true">3.3.</strong> Metadata</a></li><li class="chapter-item expanded "><a href="sources.html"><strong aria-hidden="true">3.4.</strong> Sources</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> API</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="urls_ports.html"><strong aria-hidden="true">4.1.</strong> URLs and Ports</a></li><li class="chapter-item expanded "><a href="rest_api.html"><strong aria-hidden="true">4.2.</strong> REST API</a></li><li class="chapter-item expanded "><a href="streaming_api.html"><strong aria-hidden="true">4.3.</strong> Streaming API</a></li><li class="chapter-item expanded "><a href="subscription_protocol.html"><strong aria-hidden="true">4.4.</strong> Subscription Protocol</a></li><li class="chapter-item expanded "><a href="connection.html"><strong aria-hidden="true">4.5.</strong> Discovery &amp; Connection Establishment</a></li><li class="chapter-item expanded "><a href="notifications.html"><strong aria-hidden="true">4.6.</strong> Notifications</a></li><li class="chapter-item expanded "><a href="security.html"><strong aria-hidden="true">4.7.</strong> Security</a></li><li class="chapter-item expanded "><a href="request_response.html"><strong aria-hidden="true">4.8.</strong> Request/Response</a></li><li class="chapter-item expanded "><a href="put.html"><strong aria-hidden="true">4.9.</strong> PUT Requests</a></li></ol></li><li class="chapter-item expanded "><a href="how_to_help.html"><strong aria-hidden="true">5.</strong> How Can I Help?</a></li><li class="chapter-item expanded "><a href="vesselsBranch.html"><strong aria-hidden="true">6.</strong> Appendix A: Keys Reference (Vessel)</a></li><li class="chapter-item expanded "><a href="otherBranches.html"><strong aria-hidden="true">7.</strong> Appendix B: Keys Reference (Others)</a></li><li class="chapter-item expanded "><a href="changelog.html"><strong aria-hidden="true">8.</strong> Appendix C: Changelog</a></li><li class="chapter-item expanded "><a href="versioning.html"><strong aria-hidden="true">9.</strong> Appendix D: Versioning</a></li><li class="chapter-item expanded "><a href="access_requests.html"><strong aria-hidden="true">10.</strong> Appendix E: Access Requests</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="metadata"><a class="header" href="#metadata">Metadata</a></h1>
<p>A key part of Signal K is the ability for data consumers such as apps or MFDs to automatically configure themselves
based on settings retrieved from the server. The metadata component of Signal K facilitates this through an optional
<code>meta</code> object attached to each key in the Signal K data model.</p>
<h2 id="rationale"><a class="header" href="#rationale">Rationale</a></h2>
<p>In an environment where various critical pieces of information are displayed in multiple locations it becomes quite
difficult to ensure that all of these devices use the same scale and react the same way to changes in the data. This is
especially true in an environment where these devices are not tied to the boat. A crew member may bring a personal
tablet with them for their tactician role during a Wednesday evening race or a harbor pilot may bring a laptop on board
loaded with local charts. If these devices can load critical configuration data from a central server on the boat, this
saves time and prevents costly or even disastrous mistakes from occurring due to misconfigured devices.</p>
<h2 id="metadata-for-a-data-value"><a class="header" href="#metadata-for-a-data-value">Metadata for a Data Value</a></h2>
<p>The <code>meta</code> object exists at the same level as <code>value</code> and <code>$source</code> in each key in the Signal K data model.</p>
<pre><code class="language-json">{
  &quot;displayName&quot;: &quot;Port Tachometer&quot;,
  &quot;longName&quot;: &quot;Engine 2 Tachometer&quot;,
  &quot;shortName&quot;: &quot;Tacho&quot;,
  &quot;description&quot;: &quot;Engine revolutions (x60 for RPM)&quot;,
  &quot;units&quot;: &quot;Hz&quot;,
  &quot;timeout&quot;: 1,
  &quot;displayScale&quot;: {&quot;lower&quot;: 0, &quot;upper&quot;: 75, &quot;type&quot;: &quot;linear&quot;},
  &quot;alertMethod&quot;: [&quot;visual&quot;],
  &quot;warnMethod&quot;: [&quot;visual&quot;],
  &quot;alarmMethod&quot;: [&quot;sound&quot;, &quot;visual&quot;],
  &quot;emergencyMethod&quot;: [&quot;sound&quot;, &quot;visual&quot;],
  &quot;zones&quot;: [
    {&quot;upper&quot;: 4, &quot;state&quot;: &quot;alarm&quot;, &quot;message&quot;: &quot;Stopped or very slow&quot;},
    {&quot;lower&quot;: 4, &quot;upper&quot;: 60, &quot;state&quot;: &quot;normal&quot;},
    {&quot;lower&quot;: 60, &quot;upper&quot;: 65, &quot;state&quot;: &quot;warn&quot;, &quot;message&quot;: &quot;Approaching maximum&quot;},
    {&quot;lower&quot;: 65, &quot;state&quot;: &quot;alarm&quot;, &quot;message&quot;: &quot;Exceeding maximum&quot;}
  ]
}
</code></pre>
<p>In the example <code>meta</code> object above, a definition is provided for an analog RPM gauge for the port engine. It provides a
few different options for the consumer to use to display the name of the measurement and explicitly calls out the unit
of measure.</p>
<p>###<code>description</code></p>
<p>This is the description for the Signal K path and must always be the same as the description property within the Signal K
Schema for that path.</p>
<p>###<code>displayName</code></p>
<p>This is used on or near any display or gauge which shows the data. Units can change and are presented separately, therefore no
indication of units should be included in displayName. eg. &quot;Port&quot;</p>
<p>###<code>longName</code> <code>shortName</code></p>
<p>These are human readable names for the particular instance of this value. Presented to users to identify the value. The short
version may be used by consumers where space is at a premium. As with displayName units should not be included.</p>
<p>###<code>timeout</code></p>
<p>The <code>timeout</code> property tells the consumer how long it should consider the value valid. This value is specified
in seconds, so for a high speed GPS sensor it may 0.1 or even 0.05.</p>
<p>The <code>displayScale</code> object provides information regarding the recommended type and extent of the scale used for displaying
values. The <code>lower</code> and <code>upper</code> indicate the extent of the scale to be shown. Some values are better shown on a non linear
scale, for example logarithmic for luminosity, depth, signal strength, etc. whilst others may be better on a squareroot
scale eg. depth, windspeed. <code>type</code> has possible values of <code>linear</code> (default), <code>logarithmic</code>, <code>squareroot</code> or <code>power</code>. When
<code>&quot;type&quot;: &quot;power&quot;</code> is specified an additional property <code>power</code> must be present to define the power. Note that a power of
0.5 is equivalent to <code>squareroot</code> and a power of 1 is equivalent to linear. In using these scales the type defines the
function which is applied to all values in order to calculate % scale deflection of the pointer/needle/plot:</p>
<table><thead><tr><th>Type</th><th>Formula for % deflection</th></tr></thead><tbody>
<tr><td>linear</td><td>(V - L)/(U - L)</td></tr>
<tr><td>logarithmic</td><td>(log(V) - log(L) / (log(U) - log(L))</td></tr>
<tr><td>squareroot</td><td>(√V - √L) / (√U - √L)</td></tr>
<tr><td>power (P)</td><td>(Vᴾ - Lᴾ) / (Uᴾ - Lᴾ)</td></tr>
</tbody></table>
<p>Where: V = value, L = lower bound of the gauge, U = upper bound of the gauge and P = power</p>
<p>Note that on a logarithmic scale neither L nor U can be zero. </p>
<p>The <code>alertMethod</code>, <code>warnMethod</code>, <code>alarmMethod</code> and
<code>emergencyMethod</code> properties tell the consumer how it should respond to an abnormal data condition. Presently the
values for these properties are <code>sound</code> and <code>visual</code> and the method is specified as an array containing one or both of
these options. It is up to the consumer to decide how to convey these alerts.</p>
<p>###<code>alertMethod</code>, etc
The <code>alertMethod</code>, <code>warnMethod</code>, <code>alarmMethod</code> and <code>emergencyMethod</code> properties tell the consumer how it should respond to an
abnormal data condition. Presently the values for these properties are <code>sound</code> and <code>visual</code> and the method is specified as an
array containing one or both of these options. It is up to the consumer to decide how to convey these alerts.</p>
<p>###<code>zones</code>
The last property in the <code>meta</code> object is the <code>zones</code> array. This provides a series of hints to the consumer which can
be used to properly set a range on a display gauge and also color sectors of a gauge to indicate normal or dangerous
operating conditions. It also tells the consumer which state the data is in for a given range. Combined with the alert
method properties, all Signal K consumers can react the same way to a given state.</p>
<p>The possible states in ascending order of severity are:</p>
<p>| State/Zone | Description |
|------------|--------|--------|
| nominal    | this is a special type of normal state/zone (see below)        |
| normal     | the normal operating range for the value in question (default)            |
| alert      | Indicates a safe or normal condition which is brought to the operators attention to impart information for routine action purposes |
| warn       | Indicates a condition that requires immediate attention but not immediate action |
| alarm      | Indicates a condition which is outside the specified acceptable range. Immediate action is required to prevent loss of life or equipment damage |
| emergency  | the value indicates a life-threatening condition |</p>
<p><code>nominal</code>: A example use of this is for engine monitoring eg. coolant temperature where there is a normal (no warnings)
(green) zone between say 70C and 110C, but when the temperature is between 80C and 90C (<code>nominal</code>) the needle doesn't move at
all (typically remains vertical or horizontal). This is really useful if you have many gauges (multiple motors with multiple
sensors) where it is very easy to spot that every needle is pointing in exactly the same direction. Use of nominal will only
be relevant if the gauge/display design permits it.</p>
<p>The <code>upper</code> and <code>lower</code> values in the zones do not need to be contiguous, they don't have to both be present in a zone, nor do
they need to be within the bounds of the <code>upper</code> and <code>lower</code> specified in <code>displayScale</code>. When they are outside of the
<code>displayScale</code> range they will still give rise to alerts. Both <code>upper</code> and <code>lower</code> values are considered to be inclusive.</p>
<p>If zones overlap each other the state/zone with the highest severity will take precedence. This is true for both alerts and
gauge/display rendering. Any part of the range which is not explicitly within a zone is considered to be <code>normal</code> (the default).
As such, zones with a state of <code>normal</code> have no effect and their removal would result in no changes to either displays or alerts.</p>
<p>There can be multiple zones with the same <code>state</code>, for example if a different message is required, or if they are on different parts of the scale.</p>
<p>Signal K servers will use the <code>zone</code> information to monitor any data which has a <code>meta</code> object and
raise a generic alarm event. See the section on <a href="notifications.html">Alarm Handling</a> for more.</p>
<h2 id="implicit-metadata"><a class="header" href="#implicit-metadata">Implicit Metadata</a></h2>
<p>All keys in the Signal K specification must have a <code>description</code>, and where the key is a numeric value it must have
<code>units</code>.</p>
<p>If a client requests the <code>meta</code> property for a valid Signal K key via the HTTP REST interface, the server must return
the <code>description</code> and, if applicable, <code>units</code>, even if no value has ever been generated for that key.</p>
<p>If a key has values determined by an enum, the server should include the enum in the meta. NB. in future versions
it is likely that this will become a mandatory requirement for the server.</p>
<pre><code class="language-javascript">// GET /signalk/v1/api/vessels/self/environment/depth/belowKeel/meta

{
  &quot;units&quot;: &quot;m&quot;,
  &quot;description&quot;: &quot;Depth below keel&quot;
}
</code></pre>
<p>See <a href="https://github.com/SignalK/specification/blob/1.7.0/keyswithmetadata.json">keyswithmetadata.json</a></p>
<h2 id="default-configuration"><a class="header" href="#default-configuration">Default Configuration</a></h2>
<p>Signal K does not provide a default set of metadata, it is up to the owner or their installer to configure their Signal
K environment appropriately for their vessel. However, by centralizing this configuration they will only need to do it
one time and any future consumers will automatically use this configuration.</p>
<h2 id="alarm-management"><a class="header" href="#alarm-management">Alarm Management</a></h2>
<p>An alarm watch is set by setting the <code>meta.zones</code> array appropriately. A background process on the server checks for
alarm conditions on any attribute with a <code>meta.zones</code> array. If the keys value is within a zone the server sets an
alarm key similar to <code>vessels.self.notifications.[original_key_suffix]</code>, e.g. an alarm set on
<code>vessels.self.navigation.courseOverGroundTrue</code> will become
<code>vessels.self.notifications.navigation.courseOverGroundTrue</code>.</p>
<p>The object found at this key should contain the following:</p>
<pre><code class="language-json">{
  &quot;message&quot;: &quot;any text&quot;,
  &quot;state&quot;: &quot;[normal|alert|warn|alarm|emergency]&quot;
}
</code></pre>
<h2 id="other-benefits"><a class="header" href="#other-benefits">Other Benefits</a></h2>
<p>While not strictly part of the Signal K specification, metadata configuration could be shared between boats or even
provided by manufacturers of production boats or by component suppliers such as engine or refrigerator manufacturers.
Also, any device which implements Signal K should provide a baseline metadata configuration. As this standard becomes
more widespread, less individual configuration will need to be performed.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="data_model_multiple_values.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="sources.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="data_model_multiple_values.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="sources.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
