{
  "type": "object",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "https://signalk.org/specification/1.0.0/schemas/groups/generator.json#",
  "title": "generator",
  "description": "A generator, named by a unique name within this vessel",
  "definitions": {
    "dcQualities": {
      "type": "object",
      "title": "DC Qualities",
      "description": "DC common qualities",
      "properties": {
        "associatedBus": {
          "type": "string",
          "description": "Name of BUS device is associated with"
        },
        "voltage": {
          "type": "object",
          "description": "Voltage measured at or as close as possible to the device",
          "units": "V",
          "allOf": [{
            "$ref": "../definitions.json#/definitions/numberValue"
          }, {
            "properties": {
              "ripple": {
                "description": "DC Ripple voltage",
                "$ref": "../definitions.json#/definitions/numberValue",
                "units": "V"
              }
            }
          }]
        }
      }
    },
    "acQualities": {
      "type": "object",
      "title": "AC Qualities",
      "description": "AC equipment common qualities",
      "properties": {
        "associatedBus": {
          "type": "string",
          "description": "Name of BUS device is associated with"
        },
        "lineNeutralVoltage": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "RMS voltage measured between phase and neutral",
          "units": "V"
        },
        "lineLineVoltage": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "RMS voltage measured between phases",
          "units": "V"
        },
        "current": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "RMS current",
          "units": "A"
        },
        "frequency": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "AC frequency.",
          "units": "Hz"
        },
        "reactivePower": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "Reactive power",
          "units": "W"
        },
        "powerFactor": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "Power factor",
          "unit": "ratio"
        },
        "powerFactorLagging": {
          "description": "Lead/lag status.",
          "example": "leading",
          "type": "string",
          "enum": [
            "leading",
            "lagging",
            "error",
            "not available"
          ]
        },
        "realPower": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "Real power.",
          "units": "W"
        },
        "apparentPower": {
          "$ref": "../definitions.json#/definitions/numberValue",
          "description": "Apparent power.",
          "units": "W"
        }
      }
    }
  },
  "patternProperties": {
    "(^[A-Za-z0-9]+$)": {
      "description": "This regex pattern is used for validation of the identifier for the generator",
      "properties": {
        "label": {
          "type": "string",
          "description": "Human readable label for the generator"
        },
        "state": {
          "type": "object",
          "description": "The current state of the generator",
          "allOf": [
            {
              "$ref": "../definitions.json#/definitions/commonValueFields"
            },
            {
              "properties": {
                "value": {
                  "type": "string",
                  "enum": [
                    "stopped",
                    "started",
                    "unusable"
                  ]
                }
              }
            }
          ]
        },
        "revolutions": {
          "description": "Engine revolutions (x60 for RPM)",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "Hz"
        },
        "temperature": {
          "description": "Generator temperature",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "K"
        },
        "oilTemperature": {
          "description": "Oil temperature",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "K"
        },
        "oilPressure": {
          "description": "Oil pressure",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "Pa"
        },
        "alternatorVoltage": {
          "description": "Alternator voltage",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "V"
        },
        "runTime": {
          "description": "Total running time for engine (Engine Hours in seconds)",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "s"
        },
        "coolantTemperature": {
          "description": "Coolant temperature",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "K"
        },
        "coolantPressure": {
          "description": "Coolant pressure",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "Pa"
        },
        "boostPressure": {
          "description": "Engine boost (turbo, supercharger) pressure",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "Pa"
        },
        "intakeManifoldTemperature": {
          "description": "Intake manifold temperature",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "K"
        },
        "engineLoad": {
          "description": "Engine load ratio, 0<=ratio<=1, 1 is 100%",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "ratio"
        },
        "engineTorque": {
          "description": "Engine torque ratio, 0<=ratio<=1, 1 is 100%",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "ratio"
        },
        "fuel": {
          "type": "object",
          "description": "Data about the engine's Fuel Supply",
		      "properties": {
            "type": {
              "description": "Fuel type",
              "enum": [
                "diesel",
                "petrol",
                "other"
              ]
            },
            "used": {
              "description": "Used fuel since last reset. Resetting is at user discretion",
              "$ref": "../definitions.json#/definitions/numberValue",
              "units": "m3"
            },
            "pressure": {
              "description": "Fuel pressure",
              "$ref": "../definitions.json#/definitions/numberValue",
              "units": "Pa"
            },
            "rate": {
              "description": "Fuel rate  of consumption",
              "$ref": "../definitions.json#/definitions/numberValue",
              "units": "m3/s"
            },
            "economyRate": {
              "description": "Economy fuel rate of consumption",
              "$ref": "../definitions.json#/definitions/numberValue",
              "units": "m3/s"
            },
            "averageRate": {
              "description": "Average fuel rate of consumption",
              "$ref": "../definitions.json#/definitions/numberValue",
              "units": "m3/s"
            },
            "vacuum": {
              "description": "vacuum measured at the fuel filter - an indication of the state of the fuel filter. The higher the vacuum, the more clogged the filter.",
              "$ref": "../definitions.json#/definitions/numberValue",
              "units": "Pa"
            }
          }
        },
        "exhaustTemperature": {
          "description": "Exhaust temperature",
          "$ref": "../definitions.json#/definitions/numberValue",
          "units": "K"
        },
        "dc": {
          "$ref": "#/definitions/dcQualities"
        },
        "ac": {
          "$ref": "#/definitions/acQualities"
        }
      }
    }
  }
}
